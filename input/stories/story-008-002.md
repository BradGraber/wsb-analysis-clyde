---
id: story-008-002
epic: epic-008
title: Implement Portfolio Tabs and Sub-Tabs
priority: high
story_points: [TBD]
source_requirements: [UI-TABS, UI-SUBTABS, FR-050]
dependencies: [story-008-001]
blocks: [story-008-003]
---

# Story: Implement Portfolio Tabs and Sub-Tabs

## Description
Implement the 4 horizontal portfolio tabs (Stock/Quality, Stock/Consensus, Options/Quality, Options/Consensus) and 3 sub-tabs per portfolio (Signals, Positions, Performance). Default view on load is Stock/Quality with Signals sub-tab active. Scaffold the shared composables (useSignals, usePositions, usePortfolios, useAnalysis) that provide cross-view data fetching and caching.

## Acceptance Criteria
- [ ] 4 horizontal tabs are rendered: Stock/Quality (default selected), Stock/Consensus, Options/Quality, Options/Consensus
- [ ] Each portfolio tab shows 3 sub-tabs: Signals (default selected), Positions, Performance
- [ ] Clicking a portfolio tab switches the active portfolio and preserves the current sub-tab selection
- [ ] Clicking a sub-tab switches the content view within the current portfolio
- [ ] On page load, Stock/Quality tab and Signals sub-tab are always selected (FR-050)
- [ ] Signal type pills use color coding: blue for Quality tabs, purple for Consensus tabs
- [ ] Shared composables are scaffolded with stub implementations: useSignals(), usePositions(), usePortfolios(), useAnalysis() -- each returns reactive data refs and fetch functions

## Technical Notes
- Tabs map to portfolio IDs and filter parameters: Stock/Quality -> portfolio_id=1, instrument_type=stock, signal_type=quality
- Sub-tabs route to nested views: `/portfolio/:id/signals`, `/portfolio/:id/positions`, `/portfolio/:id/performance`
- Composables use Vue 3 `ref()` and `reactive()` for state, with `async` fetch functions that call the API
- Composables cache fetched data per portfolio tab to avoid refetching on tab switch (in-memory only, cleared on reload)
- Tab component should use bootstrap-vue-next `<b-tabs>` or equivalent
- Each composable should accept portfolio_id as parameter and return `{ data, loading, error, fetch }`

## Dependencies
- Depends on: story-008-001 (Vue scaffold and routing)
- Blocks: story-008-003 (signal cards render within Signals sub-tab)
