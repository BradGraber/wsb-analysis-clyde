---
id: story-003-007
epic: epic-003
title: Implement Author Trust Snapshot at Analysis Time
priority: high
story_points: [TBD]
source_requirements: [PIPE-019]
dependencies: [epic-001]
blocks: []
---

# Story: Implement Author Trust Snapshot at Analysis Time

## Description
At AI analysis time, look up the current author trust score from the authors table and store it as a point-in-time snapshot on the comment record. This snapshot is used in Phase 4 signal confidence calculation and preserves the trust score as it was when the comment was analyzed, even if the author's trust changes later.

## Acceptance Criteria
- [ ] For each new comment being analyzed (not deduplicated), the author_trust_score already set in Phase 2 (story-002-005) is persisted to the comments table — Phase 3 does NOT re-lookup from the authors table
- [ ] The author_trust_score is stored in the comments table as a permanent snapshot (not recalculated on subsequent runs)
- [ ] The trust score snapshot occurs after deduplication check (story-003-003): only new comments get a fresh trust snapshot
- [ ] Deduplicated comments retain their original author_trust_score from first analysis (no re-lookup per PRD design note)

## Technical Notes
- Phase 2 (story-002-005) performs the single authors table lookup and sets author_trust_score on the ProcessedComment. Phase 3 (this story) persists that value to the comments table — there is NO second lookup. This eliminates the duplication identified in QA review.
- The trust_score in the authors table is updated by epic-009 (Author Trust Tracker) after each analysis run
- The snapshot is used in Phase 4 signal confidence calculation via CFG-CONFIDENCE-WEIGHTS author_trust weight (0.20)
- PRD reference: Section 3.2.2 Phase 3 step 2 bullet 4, PIPE-019

## Dependencies
- Depends on: epic-001 (authors table schema)
- Blocks: none (the snapshot is written inline during the analysis phase)
