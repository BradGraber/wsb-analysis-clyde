---
id: story-002-001
epic: epic-002
title: Implement PRAW Authentication and Hot Posts Fetching
priority: high
story_points: [TBD]
source_requirements: [PIPE-001, PIPE-002, INT-REDDIT, FR-010]
dependencies: [epic-001]
blocks: [story-002-002, story-002-003]
---

# Story: Implement PRAW Authentication and Hot Posts Fetching

## Description
Set up Reddit OAuth2 authentication using PRAW with environment variables (REDDIT_CLIENT_ID, REDDIT_CLIENT_SECRET, REDDIT_USER_AGENT) and implement fetching of the top 10 hot posts from r/wallstreetbets. This is the entry point for the Reddit data acquisition pipeline and provides the post data that all downstream stories depend on.

## Acceptance Criteria
- [ ] PRAW client authenticates via OAuth2 using three environment variables: REDDIT_CLIENT_ID, REDDIT_CLIENT_SECRET, REDDIT_USER_AGENT
- [ ] Missing or empty environment variables raise a clear error message identifying which variable is missing (not a generic PRAW exception)
- [ ] Fetches exactly the top 10 hot posts from the r/wallstreetbets subreddit
- [ ] Each fetched post produces a ProcessedPost object with all 8 fields from PRD Appendix D.2: reddit_id, title, selftext, upvotes, total_comments, image_url (null initially), image_analysis (null initially), comments (empty list initially)
- [ ] PRAW rate limiting (60 req/min) is handled by PRAW's built-in backoff (no custom rate limiter needed)
- [ ] Reddit outage handling: PRAW exceptions during authentication or fetch are caught, logged via structlog, and result in HTTP 503 response per ERR-REDDIT-OUTAGE (Tier 1 error)
- [ ] If fewer than 10 hot posts are available in the subreddit, all available posts are returned without error

## Technical Notes
- PRAW handles rate limiting automatically with built-in backoff; no custom throttling required
- Environment variables are loaded from .env file (dotenv or os.environ)
- The subreddit name "wallstreetbets" should be configurable but defaults to this value
- ProcessedPost is an in-memory data structure (dataclass or Pydantic model) per PRD Appendix D.2
- This story does NOT include image detection/analysis (story-002-002) or comment fetching (story-002-003)
- PRD reference: Section 3.2.2 Phase 1 steps 1-2, Appendix D.2

## Dependencies
- Depends on: epic-001 (database schema for reddit_posts table)
- Blocks: story-002-002 (image analysis needs posts), story-002-003 (comment fetching needs posts)
