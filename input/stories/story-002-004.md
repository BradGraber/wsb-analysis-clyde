---
id: story-002-004
epic: epic-002
title: Implement Financial Keyword Scoring
priority: high
story_points: [TBD]
source_requirements: [PIPE-009]
dependencies: [story-002-003]
blocks: [story-002-007]
---

# Story: Implement Financial Keyword Scoring

## Description
Score comments by financial keyword density to identify comments with substantive trading discussion. The keyword list includes options terminology (calls, puts, options, strike, expiry), analysis terms (DD, due diligence), and position-related language. Returns a normalized financial_score (0-1) that feeds into the composite priority formula.

## Acceptance Criteria
- [ ] Financial keyword detection scans comment body text for a configurable list of keywords including at minimum: calls, puts, options, strike, expiry, DD, due diligence, earnings, revenue, P/E, market cap, short, long, squeeze, gamma, theta, delta, IV, implied volatility
- [ ] Keyword matching is case-insensitive (e.g., "CALLS", "Calls", "calls" all match)
- [ ] financial_score is calculated as a normalized density value between 0.0 and 1.0, based on keyword occurrences relative to comment length
- [ ] Comments with zero financial keywords receive a financial_score of 0.0
- [ ] The financial_score is set on the ProcessedComment object's financial_score field
- [ ] Keyword list is defined as a constant or configuration (not hardcoded inline throughout the code) for easy tuning
- [ ] Comments with empty or whitespace-only body text receive financial_score of 0.0
- [ ] financial_score is calculated as min(1.0, keyword_occurrences / total_word_count * scaling_factor) where scaling_factor is a configurable constant (default 10.0)

## Technical Notes
- PRD specifies "keyword density" as the scoring approach -- this means keyword count relative to total word count, not just a binary presence check
- The keyword list in the PRD is non-exhaustive ("calls, puts, options, strike, expiry, DD, etc.") -- implement the full list and make it extensible
- WSB-specific terms like "tendies", "diamond hands", "YOLO" are NOT financial keywords; they are meme language detected by the AI in epic-003
- The financial_score feeds into the priority formula at 40% weight (story-002-007)
- Consider word boundary matching to avoid false positives (e.g., "call" inside "called" should not match "calls")
- PRD reference: Section 3.2.2 Phase 2 step 1 bullet 1

## Dependencies
- Depends on: story-002-003 (comments must be fetched with body text available)
- Blocks: story-002-007 (priority scoring needs financial_score component)
