---
id: task-008-014-01
story: story-008-014
title: Set up Playwright E2E infrastructure with mock and real modes
complexity: 2
---

# Task: Set up Playwright E2E infrastructure with mock and real modes

## Description
Install and configure Playwright for Vue 3 E2E testing with two modes: per-commit (mocked API, <2 min) and weekly smoke (real APIs). Configure E2E_MODE environment variable to switch modes. Set up Playwright route interception for mock mode to serve pre-recorded API responses. Create CI config for weekly smoke tests (.github/workflows/e2e-weekly.yml).

## Acceptance Criteria
- [ ] Playwright installed and configured for Vue 3
- [ ] E2E_MODE=mock: intercepts API requests with pre-recorded responses, completes <2 minutes
- [ ] E2E_MODE=real: runs against live backend with extended timeouts
- [ ] CI config .github/workflows/e2e-weekly.yml defines weekly schedule with API credentials via secrets
- [ ] Basic smoke test confirms Playwright can launch app and navigate

## Technical Notes
- Playwright recommended over Cypress for Vue 3 support and speed
- Mock mode: use Playwright `page.route()` to intercept `/api/*` requests and serve JSON fixtures
- Real mode: start backend with `uvicorn`, wait for readiness check, run tests
- Real mode timeouts: pipeline may take 10-30 min; set per-test timeout accordingly
- Per-commit tests: no backend needed, all network intercepted
- Fixtures: can reuse VCR.py cassette data converted to JSON, or hand-craft response fixtures

## Dependencies
- Depends on: task-008-013-01 (VCR.py infrastructure and cassettes for mock data)
- Blocks: task-008-014-02 (baseline scenarios run on this infrastructure)
