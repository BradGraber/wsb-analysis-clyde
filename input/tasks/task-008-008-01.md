---
id: task-008-008-01
story: story-008-008
title: Extend position card with options-specific fields and DTE countdown
complexity: 2
---

# Task: Extend position card with options-specific fields and DTE countdown

## Description
Extend the `<PositionCard>` component to conditionally render options-specific fields when instrument_type='option'. Display DTE countdown with color coding (green >14d, yellow 7-14d, red <7d), contracts_remaining/contracts_total, premium_change_pct (green/red), and strike + option_type (e.g., "$150 Call"). Stock positions continue to render the stock-specific layout. Consider sub-components: `<StockPositionDetails>` and `<OptionsPositionDetails>`.

## Acceptance Criteria
- [ ] DTE displays as countdown with label (e.g., "14 DTE") with color: green >14, yellow 7-14, red <7
- [ ] Contracts display: contracts_remaining / contracts_total (e.g., "3/5 contracts")
- [ ] Premium change % displayed with color: green positive, red negative
- [ ] Strike price + option_type as combined label (e.g., "$150 Call", "$140 Put")
- [ ] Options fields only render when instrument_type='option'; stock positions show stock layout
- [ ] Options positions appear in Options/Quality and Options/Consensus tabs only

## Technical Notes
- DTE from API convenience field or computed from expiration_date
- premium_change_pct = (current_premium - entry_premium) / entry_premium * 100 (may be pre-computed by API)
- Sub-component pattern: `<StockPositionDetails :position="pos" />` and `<OptionsPositionDetails :position="pos" />`
- Conditional rendering via `v-if="position.instrument_type === 'option'"` in PositionCard

## Dependencies
- Depends on: task-008-007-01 (base position list and card component)
- Blocks: none
