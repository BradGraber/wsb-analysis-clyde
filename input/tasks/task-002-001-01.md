---
id: task-002-001-01
story: story-002-001
title: Implement Async PRAW OAuth2 client initialization with environment variable validation
complexity: 2
---

# Task: Implement Async PRAW OAuth2 client initialization with environment variable validation

## Description
Create a `src/reddit.py` module with a `get_reddit_client()` function that initializes an Async PRAW Reddit instance using three environment variables (REDDIT_CLIENT_ID, REDDIT_CLIENT_SECRET, REDDIT_USER_AGENT). Validate all three are present before constructing the client, raising a descriptive ValueError for any missing variable. Wrap Async PRAW authentication errors as Tier 1 errors per ERR-REDDIT-OUTAGE.

## Acceptance Criteria
- [ ] `get_reddit_client()` returns a configured `asyncpraw.Reddit` instance using read-only OAuth2
- [ ] Reads REDDIT_CLIENT_ID, REDDIT_CLIENT_SECRET, REDDIT_USER_AGENT from environment (os.environ or dotenv)
- [ ] If any of the three variables is missing or empty, raises ValueError with message identifying the specific missing variable(s)
- [ ] Async PRAW authentication exceptions are caught, logged via structlog, and re-raised as a domain error suitable for HTTP 503 per ERR-REDDIT-OUTAGE
- [ ] Unit test: missing env var raises ValueError with descriptive message
- [ ] Unit test: valid env vars produce a Reddit client instance (mock Async PRAW)

## Technical Notes
- Async PRAW handles rate limiting (60 req/min) automatically; no custom throttling needed
- Use asyncpraw.Reddit(client_id=..., client_secret=..., user_agent=...) with read_only=True
- The subreddit name "wallstreetbets" is NOT configured here; it is passed to the fetch function
- PRD reference: PIPE-001, INT-REDDIT

## Dependencies
- Depends on: task-001-008-01 (structlog configured in errors module)
- Blocks: task-002-001-02
