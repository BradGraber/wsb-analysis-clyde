---
id: task-001-008-03
story: story-001-008
epic: epic-001
title: Configure structlog for JSON logging to logs/backend.log
complexity: 1
---

# Task: Configure structlog for JSON logging to logs/backend.log

## Description
Create a `src/logging_config.py` module that configures structlog to output JSON-formatted log entries to `logs/backend.log`. Support standard log levels (DEBUG, INFO, WARNING, ERROR, CRITICAL) with full stack traces on ERROR and CRITICAL. Create the logs/ directory if it does not exist. Provide a `setup_logging()` function to be called at application startup. Include a basic unit test verifying JSON output format.

## Acceptance Criteria
- [ ] `setup_logging()` configures structlog with JSON renderer
- [ ] Log entries are written to `logs/backend.log`
- [ ] Supports DEBUG, INFO, WARNING, ERROR, CRITICAL levels
- [ ] ERROR and CRITICAL entries include full stack traces when an exception is active
- [ ] logs/ directory is created if it does not exist
- [ ] Unit test: calling a log function produces valid JSON output with expected fields (level, event/message, timestamp)

## Technical Notes
- Use structlog.configure() with structlog.processors for JSON formatting
- Use structlog.stdlib integration for standard logging compatibility
- Configure both structlog and standard library logging to use the same output
- Consider adding a console handler for development (optional, can be controlled by LOG_LEVEL env var)
- This supports PRD Section 3.6.4 logging strategy: structured JSON for easy parsing
- Keep configuration simple; it will be imported and called once at startup

## Files to Create/Modify
- `src/logging_config.py` (new module)
- `tests/test_logging_config.py` (new test file)
