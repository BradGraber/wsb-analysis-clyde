---
id: task-008-014-02
story: story-008-014
title: Write 4 baseline E2E scenario tests across all portfolio tabs
complexity: 2
---

# Task: Write 4 baseline E2E scenario tests across all portfolio tabs

## Description
Write 4 baseline E2E scenarios using Playwright: (1) trigger analysis, observe progress through 4 stages, verify results summary; (2) navigate to signals tab, verify card layout, click card and verify evidence modal; (3) navigate to positions tab, verify states and exit badges; (4) open manual close popover, fill reason, confirm, verify status update. Parameterize scenarios across all 4 portfolio tabs.

## Acceptance Criteria
- [ ] Scenario 1: trigger analysis -> progress indicator advances through 4 stages -> results summary appears
- [ ] Scenario 2: navigate signals tab -> cards render correctly -> click card -> evidence modal opens with comments
- [ ] Scenario 3: navigate positions tab -> position states display correctly -> exit badges on closed positions
- [ ] Scenario 4: open manual close popover -> fill reason -> confirm -> position updates to closed
- [ ] Scenarios parameterized to run across all 4 portfolio tabs
- [ ] All scenarios pass in mock mode

## Technical Notes
- Parameterize: use Playwright test.describe.each or similar for 4 portfolio tabs
- Scenario 1 in mock mode: mock the polling responses to advance stages quickly
- Scenario 4: mock POST /positions/{id}/close and verify UI updates
- NFR-007: tests validate natural user workflow (usable without training)
- Keep tests focused on user-visible behavior, not implementation details

## Dependencies
- Depends on: task-008-014-01 (Playwright infrastructure)
- Blocks: none
