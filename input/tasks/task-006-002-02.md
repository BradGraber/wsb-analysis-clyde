---
id: task-006-002-02
story: story-006-002
title: Implement stock take-profit exit condition function
complexity: 2
---

# Task: Implement stock take-profit exit condition function

## Description
Implement the private stock take-profit exit condition function. Given a MonitoredInstrument and a candle, check if the candle's high breaches the position's take_profit_price. On breach, return an exit event with exit_reason='take_profit', exit_price=take_profit_price. This function detects the trigger but does NOT close the position; the 50% partial exit is handled downstream by story-006-003.

## Acceptance Criteria
- [ ] Function checks candle.high >= take_profit_price
- [ ] On breach, returns exit event: exit_reason='take_profit', exit_price=take_profit_price
- [ ] Returns None when candle.high < take_profit_price (no breach)
- [ ] Does NOT specify quantity_pct (partial logic handled by story-006-003)
- [ ] Function accepts MonitoredInstrument (not concrete Position type)

## Technical Notes
- FR-026: Take-profit at +15% from entry (but uses stored take_profit_price at runtime)
- PIPE-044: Take-profit is second priority after stop-loss in stock cascade
- Simulated fill at trigger level, not candle boundary
- Take-profit detection is separated from partial exit mechanics for modularity

## Dependencies
- Depends on: task-006-008-01 (candle iteration calls this function)
- Blocks: task-006-003-01 (partial take-profit builds on this detection)
