---
id: task-008-010-02
story: story-008-010
title: Implement backend error banner with retry and Refresh Prices button
complexity: 2
---

# Task: Implement backend error banner with retry and Refresh Prices button

## Description
Implement a persistent "Unable to connect to backend" banner that appears on page load failure, with a Retry button that re-attempts GET /status. For individual request failures, show inline error messages with retry. Implement the "Refresh Prices" button that fetches live prices for open positions via GET /positions?portfolio_id=X, shows a loading spinner during fetch, and displays a toast on success or error.

## Acceptance Criteria
- [ ] Backend connectivity failure: persistent banner "Unable to connect to backend" with Retry button
- [ ] Retry button re-attempts GET /status
- [ ] Individual request failures: inline error message with retry link/button
- [ ] "Refresh Prices" button visible on Positions sub-tab
- [ ] Refresh Prices shows spinner during fetch, calls GET /positions?portfolio_id=X
- [ ] Toast notification on refresh success or error

## Technical Notes
- Global error handler: wrap API client with network error detection; if fetch fails, show banner
- Banner component: `<BackendErrorBanner />` rendered above main content, dismissed on successful reconnect
- Inline errors: each composable's `error` ref drives inline error display per component
- Refresh Prices: refetches position data to get updated current_price values
- UI-BACKEND-ERROR, UI-REFRESH requirements

## Dependencies
- Depends on: task-008-010-01 (header indicators and status check establish error detection pattern)
- Blocks: task-008-013-01 (error injection tests exercise these patterns)
