---
id: task-007-004-01
story: story-007-004
title: Create idempotent seed data script for frontend development
complexity: 2
---

# Task: Create idempotent seed data script for frontend development

## Description
Write a standalone Python script (`scripts/seed_data.py`) that populates the database with realistic mock data across all entity tables, enabling the Vue dashboard team to develop against real GET endpoint responses. The script must be idempotent (safe to run multiple times) and produce internally consistent data with valid foreign key relationships. Phase 7a task (Weeks 2-3).

## Acceptance Criteria
- [ ] Script runnable as `python scripts/seed_data.py`
- [ ] Creates 2+ analysis runs with varied statuses (completed, failed) and realistic timestamps
- [ ] Populates all 4 portfolios with $100,000 initial cash balance
- [ ] Creates 10+ signals across tickers (AAPL, GME, TSLA, NVDA, AMD, etc.) with varied signal_types and confidence scores
- [ ] Creates 8+ positions: mix of open/closed, stock/options, across multiple portfolios with realistic entry prices
- [ ] Creates position_exits for closed positions covering at least 4 exit_reason types (stop_loss, take_profit, trailing_stop, manual_close)
- [ ] Creates 1+ evaluation period per portfolio (mix of active/completed)
- [ ] Creates author records with varied trust_score values
- [ ] Creates comments and signal_comments junction records for evidence drill-down
- [ ] Creates price_history records for sparkline rendering
- [ ] Script is idempotent: INSERT OR IGNORE or existence checks prevent duplicates
- [ ] All foreign key references are internally consistent

## Technical Notes
- Use realistic WSB-style data: familiar tickers, plausible prices, reasonable confidence scores (0.5-0.95)
- Include both stock and option positions with appropriate field population (option fields NULL for stocks, stock fields NULL for options)
- Set one run to status='running' optionally (commented out or behind a flag) for testing "analysis in progress" UI state
- Consider organizing seed data as a series of insert functions by entity type for maintainability
- Import and use the get_connection context manager from src/db.py

## Dependencies
- Depends on: task-007-003-01, task-007-003-02, task-007-003-03, task-007-003-04 (endpoints exist to verify against)
- Blocks: none (but enables epic-008 frontend development)
