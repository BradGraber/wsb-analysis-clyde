---
id: task-006-014-01
story: story-006-014
title: Implement GET /auth/status token health check endpoint
complexity: 2
---

# Task: Implement GET /auth/status token health check endpoint

## Description
Implement a GET /auth/status FastAPI endpoint that reads the Schwab OAuth token file and returns token health information: access_token_expires_at, refresh_token_expires_at, a warning flag when either token expires within 24 hours, and a human-readable status field ('healthy', 'warning', 'expired', 'not_configured'). Return 503 if token storage is inaccessible. Conform to the standard API envelope format from epic-007.

## Acceptance Criteria
- [ ] GET /auth/status returns JSON with access_token_expires_at and refresh_token_expires_at
- [ ] Includes boolean warning flag when either token < 24 hours from expiry
- [ ] Includes status field: 'healthy', 'warning', 'expired', or 'not_configured'
- [ ] Returns 200 with status='not_configured' if token file does not exist
- [ ] Returns 200 with status='expired' if tokens are expired (not error code)
- [ ] Returns 503 if token storage is inaccessible
- [ ] Response uses standard API envelope format from epic-007

## Technical Notes
- Token storage uses chmod 600 file-based storage (epic-001)
- Endpoint reads metadata only, does not trigger token refresh
- Warning threshold: 24 hours gives operators time for manual re-auth
- Lightweight endpoint with no external API calls, suitable for dashboard polling
- Security recommendation from qc-sec-003

## Dependencies
- Depends on: epic-001 (token storage), epic-007 (API envelope format)
- Blocks: none
