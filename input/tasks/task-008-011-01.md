---
id: task-008-011-01
story: story-008-011
title: Implement token expiration banner with polling and dismissal
complexity: 2
---

# Task: Implement token expiration banner with polling and dismissal

## Description
Create a `<TokenExpirationBanner>` component that polls GET /auth/status every 5 minutes to check Schwab token expiration. When the token expires within 24 hours, display a persistent warning banner with approximate time remaining (e.g., "Schwab token expires in approximately 6 hours. Please re-authenticate."). Banner is dismissible but re-appears on next poll if still near expiration. Fails silently if endpoint is unreachable or returns 404.

## Acceptance Criteria
- [ ] Polls GET /auth/status every 5 minutes (300s)
- [ ] Banner shown when token expires within 24 hours, with time remaining
- [ ] Banner dismissible via close button
- [ ] After dismissal, re-appears on next poll cycle if token still near expiration
- [ ] No banner when token is healthy (>24h until expiration)
- [ ] Fails silently on endpoint error or 404 (no banner shown)

## Technical Notes
- GET /auth/status from story-006-014 returns token_expires_at timestamp
- Compute hours remaining client-side from token_expires_at
- Use ref to track dismissed state; reset on new poll detecting expiration
- Render above main content in app layout
- Non-blocking enhancement: app fully functional without it
- Poll interval cleanup on component unmount

## Dependencies
- Depends on: task-008-001-01 (Vue scaffold for banner placement), story-006-014 (GET /auth/status endpoint)
- Blocks: none
