---
id: task-006-013-01
story: story-006-013
title: Implement Schwab exponential backoff retry wrapper
complexity: 2
---

# Task: Implement Schwab exponential backoff retry wrapper

## Description
Implement a retry wrapper for Schwab API calls with exponential backoff: 1s, 2s, 4s delays between attempts (3 attempts max, 15s total max). The wrapper should be generic enough to wrap any Schwab client method. Log each retry attempt with structlog including ticker, attempt number, and error details. On final failure, raise or return a sentinel indicating exhaustion.

## Acceptance Criteria
- [ ] Retries with exponential backoff: 1s, 2s, 4s delays
- [ ] Maximum 3 attempts per API call
- [ ] Total retry time does not exceed 15 seconds
- [ ] Each attempt logged with structlog (ticker, attempt number, error)
- [ ] On exhaustion, returns failure sentinel for downstream fallback logic
- [ ] Generic wrapper applicable to any Schwab client method

## Technical Notes
- PIPE-051: Schwab retry with backoff (1s, 2s, 4s max 15s, up to 3 attempts)
- Retry logic wraps individual API calls, not the entire monitoring loop
- ThreadPoolExecutor used for concurrent fetches (wraps individual calls within threads)
- structlog JSON format per project conventions

## Dependencies
- Depends on: epic-001 (Schwab client)
- Blocks: task-006-013-02
