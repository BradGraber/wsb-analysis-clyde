---
id: task-008-010-01
story: story-008-010
title: Implement page reload recovery and header indicators
complexity: 2
---

# Task: Implement page reload recovery and header indicators

## Description
On page mount, call GET /status to check for an active run. If active_run_id is present, resume progress polling using the progress indicator from task-008-009-01. Implement the "Last analysis: [relative time]" display in the header (computed from last_run_completed_at). Implement the market hours indicator: when market is closed, display "Market closed -- prices as of [last close time]" using client-side US ET calculation.

## Acceptance Criteria
- [ ] On mount, GET /status is called; if active_run_id present, progress polling resumes at current phase
- [ ] "Last analysis: [relative time]" displayed in header from last_run_completed_at
- [ ] Market hours indicator: "Market closed -- prices as of [last close time]" when outside Mon-Fri 9:30 AM - 4:00 PM ET
- [ ] Market hours: client-side US Eastern Time calculation (basic weekday check, no holiday calendar)

## Technical Notes
- Reload recovery: `onMounted` hook checks status, starts polling if active run detected
- Last analysis time: use dayjs relativeTime plugin or manual computation
- Market hours utility: `isMarketOpen()` function checking day-of-week and time in America/New_York
- These are header-level indicators, visible across all tabs

## Dependencies
- Depends on: task-008-009-01 (progress indicator to resume)
- Blocks: task-008-010-02, task-008-013-01
